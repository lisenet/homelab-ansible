{{ ansible_managed | comment }}
# Generated by Ansible role {{ ansible_role_name }}

# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html

[mysqld]
default-authentication-plugin   = mysql_native_password
sql_mode                        = NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,ONLY_FULL_GROUP_BY
transaction_isolation           = READ-COMMITTED
optimizer_search_depth          = 0
tls_version                     = ''
character_set_server            = utf8mb4
collation_server                = utf8mb4_general_ci
lower_case_table_names          = 1
explicit_defaults_for_timestamp = ON

# *** Basic Settings ***
user                  = mysql
pid_file              = /var/run/mysqld/mysqld.pid
socket                = /var/lib/mysql/mysql.sock
bind_address          = 127.0.0.1
port                  = 3306
datadir               = /var/lib/mysql
tmpdir                = /run/mysqld
log-error             = /var/log/mysqld.log
skip_external_locking = 1
skip_name_resolve     = 1
mysqlx                = 0

# *** Tuning ***
max_connections     = 50
wait_timeout        = 60
interactive_timeout = 60
open_files_limit    = 5000
table_open_cache    = 1024
max_allowed_packet  = 1M
max_heap_table_size = 128M
tmp_table_size      = 128M

# *** Fine Tuning ***
key_buffer_size      = 6M
read_rnd_buffer_size = 256K
thread_stack         = 256K
thread_cache_size    = 9
join_buffer_size     = 256K
sort_buffer_size     = 256K
read_buffer_size     = 128K

# *** Logging ***
general_log_file = /var/log/mysqld.log
general_log      = 0

slow_query_log      = 0
slow_query_log_file = /var/lib/mysql/mysql-slow.log
long_query_time     = 10
log_queries_not_using_indexes = 0
log_slow_admin_statements     = 0


# *** Replication and Binlogs ***
# Binlogs are disabled
disable_log_bin
server_id        = 1
max_binlog_size  = 128M
sync_binlog      = 0

# *** InnoDB ***
innodb_strict_mode             = ON
innodb_file_per_table          = 1
innodb_flush_log_at_trx_commit = 1
innodb_buffer_pool_size        = 512M
innodb_buffer_pool_instances   = 1
innodb_page_cleaners           = 4
innodb_log_buffer_size         = 32M
innodb_redo_log_capacity       = 134217728
innodb_lock_wait_timeout       = 100
innodb_data_file_path          = ibdata1:16M:autoextend:max:1024M
innodb_temp_data_file_path     = ibtmp1:12M:autoextend:max:1024M


[mysqldump]
quick
quote_names
max_allowed_packet=1M

[mysqld_safe]
log-error = /var/log/mysqld.log
pid_file  = /var/run/mysql/mysql.pid
open_files_limit = 5000
