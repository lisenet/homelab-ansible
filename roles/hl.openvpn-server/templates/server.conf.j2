{{ ansible_managed | comment }}
# Generated by Ansible role {{ ansible_role_name }}

proto {{ openvpn_protocol }}
port {{ openvpn_port }}
dev tun
server {{ openvpn_subnet | ansible.utils.ipaddr('network') }} {{ openvpn_subnet | ansible.utils.ipaddr('netmask') }}
topology subnet
persist-key
persist-tun
keepalive 10 120
max-clients {{ openvpn_max_clients }}
cipher {{ openvpn_cipher }}

ca {{ openvpn_pki_dir }}/ca.crt
cert {{ openvpn_pki_dir }}/issued/server.crt
key {{ openvpn_pki_dir }}/private/server.key
dh {{ openvpn_pki_dir }}/dh.pem

tls-crypt {{ openvpn_pki_dir }}/tc.key

auth SHA512
push "redirect-gateway def1 bypass-dhcp"
push "explicit-exit-notify 3"

user nobody
group nobody
verb 3

explicit-exit-notify 1
status /var/log/openvpn-status.log
log-append /var/log/openvpn.log
duplicate-cn
