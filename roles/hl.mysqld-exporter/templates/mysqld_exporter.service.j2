{{ ansible_managed | comment }}
# Generated by Ansible role {{ ansible_role_name }}

[Unit]
Description=Prometheus
Documentation=https://github.com/prometheus/mysqld_exporter
Wants=network-online.target
After=network-online.target

[Service]
Type=simple
User={{ prometheus_user }}
Group={{ prometheus_user }}
ExecReload=/bin/kill -HUP $MAINPID
ExecStart=/usr/local/bin/{{ mysqld_exporter_binary }} \
    --config.my-cnf={{ mysqld_my_cnf_file }} \
    --tls.insecure-skip-verify \
    --web.listen-address=0.0.0.0:{{ mysqld_exporter_port }} \
    --web.telemetry-path=/metrics

SyslogIdentifier=prometheus
Restart=always

[Install]
WantedBy=multi-user.target
